@using Inventory_Management_System.Entities
@model IEnumerable<Inventory_Management_System.Entities.Shipment>

@{
    ViewData["Title"] = "Shipments";
}

<h1 class="h3 mb-3">Shipments</h1>

<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <span class="card-title mb-0">Shipment List</span>
        <a class="btn btn-primary" asp-action="Create">New Shipment</a>
    </div>
    <div class="card-body">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>Tracking #</th>
                    <th>Customer</th>
                    <th>Destination</th>
                    <th>Status</th>
                    <th>Items</th>
                    <th>Shipped Date</th>
                    <th>Delivery Date</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var shipment in Model)
                {
                    <tr>
                        <td><strong>@shipment.TrackingNumber</strong></td>
                        <td>@shipment.Order?.Customer?.FullName</td>
                        <td>@shipment.Destination</td>
                        <td>
                            @switch (shipment.Status)
                            {
                                case ShipmentStatus.Delivered:
                                    <span class="badge bg-success">Delivered</span>
                                    break;
                                case ShipmentStatus.InTransit:
                                    <span class="badge bg-primary">In Transit</span>
                                    break;
                                case ShipmentStatus.Pending:
                                    <span class="badge bg-warning text-dark">Pending</span>
                                    break;
                                case ShipmentStatus.Cancelled:
                                    <span class="badge bg-danger">Cancelled</span>
                                    break;
                                default:
                                    <span class="badge bg-secondary">@shipment.Status</span>
                                    break;
                            }
                        </td>
                        <td>@shipment.ItemCount</td>
                        <td>@(shipment.ShippedDate?.ToString("yyyy-MM-dd") ?? "Not shipped")</td>
                        <td>@(shipment.DeliveryDate?.ToString("yyyy-MM-dd") ?? "-")</td>
                        <td>
                            <a class="btn btn-sm btn-outline-info" asp-action="Details" asp-route-id="@shipment.ShipmentID"><i class="align-middle" data-feather="eye"></i></a>
                            <a class="btn btn-sm btn-outline-warning" asp-action="Edit" asp-route-id="@shipment.ShipmentID"><i class="align-middle" data-feather="edit"></i></a>
                            <a class="btn btn-sm btn-outline-danger" asp-action="Delete" asp-route-id="@shipment.ShipmentID"><i class="align-middle" data-feather="trash-2"></i></a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
